!function(a){"object"==typeof exports&&typeof module<"u"?module.exports=a():"function"==typeof define&&define.amd?define([],a):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).localforage=a()}(function(){return function v(c,_,S){function B(y,C){if(!_[y]){if(!c[y]){var l="function"==typeof require&&require;if(!C&&l)return l(y,!0);if(p)return p(y,!0);var b=new Error("Cannot find module '"+y+"'");throw b.code="MODULE_NOT_FOUND",b}var T=_[y]={exports:{}};c[y][0].call(T.exports,function(D){return B(c[y][1][D]||D)},T,T.exports,v,c,_,S)}return _[y].exports}for(var p="function"==typeof require&&require,A=0;A<S.length;A++)B(S[A]);return B}({1:[function(v,c,_){(function(S){"use strict";var p,B=S.MutationObserver||S.WebKitMutationObserver;if(B){var A=0,y=new B(D),C=S.document.createTextNode("");y.observe(C,{characterData:!0}),p=function(){C.data=A=++A%2}}else if(!S.setImmediate&&typeof S.MessageChannel<"u"){var l=new S.MessageChannel;l.port1.onmessage=D,p=function(){l.port2.postMessage(0)}}else p="document"in S&&"onreadystatechange"in S.document.createElement("script")?function(){var L=S.document.createElement("script");L.onreadystatechange=function(){D(),L.onreadystatechange=null,L.parentNode.removeChild(L),L=null},S.document.documentElement.appendChild(L)}:function(){setTimeout(D,0)};var b,T=[];function D(){b=!0;for(var L,z,M=T.length;M;){for(z=T,T=[],L=-1;++L<M;)z[L]();M=T.length}b=!1}c.exports=function R(L){1===T.push(L)&&!b&&p()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(v,c,_){"use strict";var S=v(1);function B(){}var p={},A=["REJECTED"],y=["FULFILLED"],C=["PENDING"];function l(g){if("function"!=typeof g)throw new TypeError("resolver must be a function");this.state=C,this.queue=[],this.outcome=void 0,g!==B&&R(this,g)}function b(g,P,N){this.promise=g,"function"==typeof P&&(this.onFulfilled=P,this.callFulfilled=this.otherCallFulfilled),"function"==typeof N&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function T(g,P,N){S(function(){var O;try{O=P(N)}catch(U){return p.reject(g,U)}O===g?p.reject(g,new TypeError("Cannot resolve promise with itself")):p.resolve(g,O)})}function D(g){var P=g&&g.then;if(g&&("object"==typeof g||"function"==typeof g)&&"function"==typeof P)return function(){P.apply(g,arguments)}}function R(g,P){var N=!1;function O(G){N||(N=!0,p.reject(g,G))}function U(G){N||(N=!0,p.resolve(g,G))}var X=L(function Y(){P(U,O)});"error"===X.status&&O(X.value)}function L(g,P){var N={};try{N.value=g(P),N.status="success"}catch(O){N.status="error",N.value=O}return N}c.exports=l,l.prototype.catch=function(g){return this.then(null,g)},l.prototype.then=function(g,P){if("function"!=typeof g&&this.state===y||"function"!=typeof P&&this.state===A)return this;var N=new this.constructor(B);return this.state!==C?T(N,this.state===y?g:P,this.outcome):this.queue.push(new b(N,g,P)),N},b.prototype.callFulfilled=function(g){p.resolve(this.promise,g)},b.prototype.otherCallFulfilled=function(g){T(this.promise,this.onFulfilled,g)},b.prototype.callRejected=function(g){p.reject(this.promise,g)},b.prototype.otherCallRejected=function(g){T(this.promise,this.onRejected,g)},p.resolve=function(g,P){var N=L(D,P);if("error"===N.status)return p.reject(g,N.value);var O=N.value;if(O)R(g,O);else{g.state=y,g.outcome=P;for(var U=-1,Y=g.queue.length;++U<Y;)g.queue[U].callFulfilled(P)}return g},p.reject=function(g,P){g.state=A,g.outcome=P;for(var N=-1,O=g.queue.length;++N<O;)g.queue[N].callRejected(P);return g},l.resolve=function z(g){return g instanceof this?g:p.resolve(new this(B),g)},l.reject=function M(g){var P=new this(B);return p.reject(P,g)},l.all=function W(g){var P=this;if("[object Array]"!==Object.prototype.toString.call(g))return this.reject(new TypeError("must be an array"));var N=g.length,O=!1;if(!N)return this.resolve([]);for(var U=new Array(N),Y=0,X=-1,G=new this(B);++X<N;)q(g[X],X);return G;function q(te,re){P.resolve(te).then(function he(oe){U[re]=oe,++Y===N&&!O&&(O=!0,p.resolve(G,U))},function(oe){O||(O=!0,p.reject(G,oe))})}},l.race=function F(g){if("[object Array]"!==Object.prototype.toString.call(g))return this.reject(new TypeError("must be an array"));var N=g.length,O=!1;if(!N)return this.resolve([]);for(var U=-1,Y=new this(B);++U<N;)this.resolve(g[U]).then(function(q){O||(O=!0,p.resolve(Y,q))},function(q){O||(O=!0,p.reject(Y,q))});return Y}},{1:1}],3:[function(v,c,_){(function(S){"use strict";"function"!=typeof S.Promise&&(S.Promise=v(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(v,c,_){"use strict";var S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A=function p(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function C(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(r){if("TypeError"!==r.name)throw r;for(var o=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(n.type)}}typeof Promise>"u"&&v(3);var l=Promise;function b(e,n){n&&e.then(function(t){n(null,t)},function(t){n(t)})}function T(e,n,t){"function"==typeof n&&e.then(n),"function"==typeof t&&e.catch(t)}function D(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function R(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var L="local-forage-detect-blob-support",z=void 0,M={},W=Object.prototype.toString,F="readonly",g="readwrite";function U(e){var n=M[e.name],t={};t.promise=new l(function(o,i){t.resolve=o,t.reject=i}),n.deferredOperations.push(t),n.dbReady=n.dbReady?n.dbReady.then(function(){return t.promise}):t.promise}function Y(e){var t=M[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function X(e,n){var o=M[e.name].deferredOperations.pop();if(o)return o.reject(n),o.promise}function G(e,n){return new l(function(t,o){if(M[e.name]=M[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!n)return t(e.db);U(e),e.db.close()}var i=[e.name];n&&i.push(e.version);var r=A.open.apply(A,i);n&&(r.onupgradeneeded=function(u){var d=r.result;try{d.createObjectStore(e.storeName),u.oldVersion<=1&&d.createObjectStore(L)}catch(h){if("ConstraintError"!==h.name)throw h;console.warn('The database "'+e.name+'" has been upgraded from version '+u.oldVersion+" to version "+u.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),r.onerror=function(u){u.preventDefault(),o(r.error)},r.onsuccess=function(){var u=r.result;u.onversionchange=function(d){d.target.close()},t(u),Y(e)}})}function q(e){return G(e,!1)}function te(e){return G(e,!0)}function re(e,n){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),i=e.version>e.db.version;if(e.version<e.db.version&&(e.version!==n&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||t){if(t){var r=e.db.version+1;r>e.version&&(e.version=r)}return!0}return!1}function oe(e){var n=function P(e){for(var n=e.length,t=new ArrayBuffer(n),o=new Uint8Array(t),i=0;i<n;i++)o[i]=e.charCodeAt(i);return t}(atob(e.data));return C([n],{type:e.type})}function Ae(e){return e&&e.__local_forage_encoded_blob}function ut(e){var n=this,t=n._initReady().then(function(){var o=M[n._dbInfo.name];if(o&&o.dbReady)return o.dbReady});return T(t,e,e),t}function Z(e,n,t,o){void 0===o&&(o=1);try{var i=e.db.transaction(e.storeName,n);t(null,i)}catch(r){if(o>0&&(!e.db||"InvalidStateError"===r.name||"NotFoundError"===r.name))return l.resolve().then(function(){if(!e.db||"NotFoundError"===r.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),te(e)}).then(function(){return function ct(e){U(e);for(var n=M[e.name],t=n.forages,o=0;o<t.length;o++){var i=t[o];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,q(e).then(function(r){return e.db=r,re(e)?te(e):r}).then(function(r){e.db=n.db=r;for(var u=0;u<t.length;u++)t[u]._dbInfo.db=r}).catch(function(r){throw X(e,r),r})}(e).then(function(){Z(e,n,t,o-1)})}).catch(t);t(r)}}var bt={_driver:"asyncStorage",_initStorage:function lt(e){var n=this,t={db:null};if(e)for(var o in e)t[o]=e[o];var i=M[t.name];i||(M[t.name]=i={forages:[],db:null,dbReady:null,deferredOperations:[]}),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=ut);var r=[];function u(){return l.resolve()}for(var d=0;d<i.forages.length;d++){var h=i.forages[d];h!==n&&r.push(h._initReady().catch(u))}var m=i.forages.slice(0);return l.all(r).then(function(){return t.db=i.db,q(t)}).then(function(w){return t.db=w,re(t,n._defaultConfig.version)?te(t):w}).then(function(w){t.db=i.db=w,n._dbInfo=t;for(var x=0;x<m.length;x++){var $=m[x];$!==n&&($._dbInfo.db=t.db,$._dbInfo.version=t.version)}})},_support:function y(){try{if(!A||!A.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||n)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function dt(e,n){var t=this,o=new l(function(i,r){t.ready().then(function(){Z(t._dbInfo,F,function(u,d){if(u)return r(u);try{var m=d.objectStore(t._dbInfo.storeName).openCursor(),w=1;m.onsuccess=function(){var x=m.result;if(x){var $=x.value;Ae($)&&($=oe($));var k=e($,x.key,w++);void 0!==k?i(k):x.continue()}else i()},m.onerror=function(){r(m.error)}}catch(x){r(x)}})}).catch(r)});return b(o,n),o},getItem:function ft(e,n){var t=this;e=D(e);var o=new l(function(i,r){t.ready().then(function(){Z(t._dbInfo,F,function(u,d){if(u)return r(u);try{var m=d.objectStore(t._dbInfo.storeName).get(e);m.onsuccess=function(){var w=m.result;void 0===w&&(w=null),Ae(w)&&(w=oe(w)),i(w)},m.onerror=function(){r(m.error)}}catch(w){r(w)}})}).catch(r)});return b(o,n),o},setItem:function vt(e,n,t){var o=this;e=D(e);var i=new l(function(r,u){var d;o.ready().then(function(){return d=o._dbInfo,"[object Blob]"===W.call(n)?function O(e){return"boolean"==typeof z?l.resolve(z):function N(e){return new l(function(n){var t=e.transaction(L,g),o=C([""]);t.objectStore(L).put(o,"key"),t.onabort=function(i){i.preventDefault(),i.stopPropagation(),n(!1)},t.oncomplete=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);n(r||!i||parseInt(i[1],10)>=43)}}).catch(function(){return!1})}(e).then(function(n){return z=n})}(d.db).then(function(h){return h?n:function he(e){return new l(function(n,t){var o=new FileReader;o.onerror=t,o.onloadend=function(i){var r=btoa(i.target.result||"");n({__local_forage_encoded_blob:!0,data:r,type:e.type})},o.readAsBinaryString(e)})}(n)}):n}).then(function(h){Z(o._dbInfo,g,function(m,w){if(m)return u(m);try{var x=w.objectStore(o._dbInfo.storeName);null===h&&(h=void 0);var $=x.put(h,e);w.oncomplete=function(){void 0===h&&(h=null),r(h)},w.onabort=w.onerror=function(){u($.error?$.error:$.transaction.error)}}catch(k){u(k)}})}).catch(u)});return b(i,t),i},removeItem:function pt(e,n){var t=this;e=D(e);var o=new l(function(i,r){t.ready().then(function(){Z(t._dbInfo,g,function(u,d){if(u)return r(u);try{var m=d.objectStore(t._dbInfo.storeName).delete(e);d.oncomplete=function(){i()},d.onerror=function(){r(m.error)},d.onabort=function(){r(m.error?m.error:m.transaction.error)}}catch(w){r(w)}})}).catch(r)});return b(o,n),o},clear:function ht(e){var n=this,t=new l(function(o,i){n.ready().then(function(){Z(n._dbInfo,g,function(r,u){if(r)return i(r);try{var h=u.objectStore(n._dbInfo.storeName).clear();u.oncomplete=function(){o()},u.onabort=u.onerror=function(){i(h.error?h.error:h.transaction.error)}}catch(m){i(m)}})}).catch(i)});return b(t,e),t},length:function mt(e){var n=this,t=new l(function(o,i){n.ready().then(function(){Z(n._dbInfo,F,function(r,u){if(r)return i(r);try{var h=u.objectStore(n._dbInfo.storeName).count();h.onsuccess=function(){o(h.result)},h.onerror=function(){i(h.error)}}catch(m){i(m)}})}).catch(i)});return b(t,e),t},key:function gt(e,n){var t=this,o=new l(function(i,r){e<0?i(null):t.ready().then(function(){Z(t._dbInfo,F,function(u,d){if(u)return r(u);try{var h=d.objectStore(t._dbInfo.storeName),m=!1,w=h.openKeyCursor();w.onsuccess=function(){var x=w.result;x?0===e||m?i(x.key):(m=!0,x.advance(e)):i(null)},w.onerror=function(){r(w.error)}}catch(x){r(x)}})}).catch(r)});return b(o,n),o},keys:function yt(e){var n=this,t=new l(function(o,i){n.ready().then(function(){Z(n._dbInfo,F,function(r,u){if(r)return i(r);try{var h=u.objectStore(n._dbInfo.storeName).openKeyCursor(),m=[];h.onsuccess=function(){var w=h.result;w?(m.push(w.key),w.continue()):o(m)},h.onerror=function(){i(h.error)}}catch(w){i(w)}})}).catch(i)});return b(t,e),t},dropInstance:function wt(e,n){n=R.apply(this,arguments);var i,t=this.config();((e="function"!=typeof e&&e||{}).name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName),e.name)?i=(e.name===t.name&&this._dbInfo.db?l.resolve(this._dbInfo.db):q(e).then(function(d){var h=M[e.name],m=h.forages;h.db=d;for(var w=0;w<m.length;w++)m[w]._dbInfo.db=d;return d})).then(e.storeName?function(d){if(d.objectStoreNames.contains(e.storeName)){var h=d.version+1;U(e);var m=M[e.name],w=m.forages;d.close();for(var x=0;x<w.length;x++){var $=w[x];$._dbInfo.db=null,$._dbInfo.version=h}return new l(function(H,K){var V=A.open(e.name,h);V.onerror=function(J){V.result.close(),K(J)},V.onupgradeneeded=function(){V.result.deleteObjectStore(e.storeName)},V.onsuccess=function(){var J=V.result;J.close(),H(J)}}).then(function(H){m.db=H;for(var K=0;K<w.length;K++){var V=w[K];V._dbInfo.db=H,Y(V._dbInfo)}}).catch(function(H){throw(X(e,H)||l.resolve()).catch(function(){}),H})}}:function(d){U(e);var h=M[e.name],m=h.forages;d.close();for(var w=0;w<m.length;w++)m[w]._dbInfo.db=null;return new l(function(k,H){var K=A.deleteDatabase(e.name);K.onerror=function(){var V=K.result;V&&V.close(),H(K.error)},K.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},K.onsuccess=function(){var V=K.result;V&&V.close(),k(V)}}).then(function(k){h.db=k;for(var H=0;H<m.length;H++)Y(m[H]._dbInfo)}).catch(function(k){throw(X(e,k)||l.resolve()).catch(function(){}),k})}):i=l.reject("Invalid arguments");return b(i,n),i}},j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",De=/^~~local_forage_type~([^~]+)~/,ce="__lfsc__:",ye="blob",We=Object.prototype.toString;function Fe(e){var o,r,u,d,h,n=.75*e.length,t=e.length,i=0;"="===e[e.length-1]&&(n--,"="===e[e.length-2]&&n--);var m=new ArrayBuffer(n),w=new Uint8Array(m);for(o=0;o<t;o+=4)r=j.indexOf(e[o]),u=j.indexOf(e[o+1]),d=j.indexOf(e[o+2]),h=j.indexOf(e[o+3]),w[i++]=r<<2|u>>4,w[i++]=(15&u)<<4|d>>2,w[i++]=(3&d)<<6|63&h;return m}function we(e){var o,n=new Uint8Array(e),t="";for(o=0;o<n.length;o+=3)t+=j[n[o]>>2],t+=j[(3&n[o])<<4|n[o+1]>>4],t+=j[(15&n[o+1])<<2|n[o+2]>>6],t+=j[63&n[o+2]];return n.length%3==2?t=t.substring(0,t.length-1)+"=":n.length%3==1&&(t=t.substring(0,t.length-2)+"=="),t}var be={serialize:function xt(e,n){var t="";if(e&&(t=We.call(e)),e&&("[object ArrayBuffer]"===t||e.buffer&&"[object ArrayBuffer]"===We.call(e.buffer))){var o,i=ce;e instanceof ArrayBuffer?(o=e,i+="arbf"):(o=e.buffer,"[object Int8Array]"===t?i+="si08":"[object Uint8Array]"===t?i+="ui08":"[object Uint8ClampedArray]"===t?i+="uic8":"[object Int16Array]"===t?i+="si16":"[object Uint16Array]"===t?i+="ur16":"[object Int32Array]"===t?i+="si32":"[object Uint32Array]"===t?i+="ui32":"[object Float32Array]"===t?i+="fl32":"[object Float64Array]"===t?i+="fl64":n(new Error("Failed to get type for BinaryArray"))),n(i+we(o))}else if("[object Blob]"===t){var r=new FileReader;r.onload=function(){var u="~~local_forage_type~"+e.type+"~"+we(this.result);n(ce+ye+u)},r.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(u){console.error("Couldn't convert value into a JSON string: ",e),n(null,u)}},deserialize:function St(e){if(e.substring(0,9)!==ce)return JSON.parse(e);var o,n=e.substring(13),t=e.substring(9,13);if(t===ye&&De.test(n)){var i=n.match(De);o=i[1],n=n.substring(i[0].length)}var r=Fe(n);switch(t){case"arbf":return r;case ye:return C([r],{type:o});case"si08":return new Int8Array(r);case"ui08":return new Uint8Array(r);case"uic8":return new Uint8ClampedArray(r);case"si16":return new Int16Array(r);case"ur16":return new Uint16Array(r);case"si32":return new Int32Array(r);case"ui32":return new Uint32Array(r);case"fl32":return new Float32Array(r);case"fl64":return new Float64Array(r);default:throw new Error("Unkown type: "+t)}},stringToBuffer:Fe,bufferToString:we};function ze(e,n,t,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,o)}function ee(e,n,t,o,i,r){e.executeSql(t,o,i,function(u,d){d.code===d.SYNTAX_ERR?u.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(h,m){m.rows.length?r(h,d):ze(h,n,function(){h.executeSql(t,o,i,r)},r)},r):r(u,d)},r)}function Ue(e,n,t,o){var i=this;e=D(e);var r=new l(function(u,d){i.ready().then(function(){void 0===n&&(n=null);var h=n,m=i._dbInfo;m.serializer.serialize(n,function(w,x){x?d(x):m.db.transaction(function($){ee($,m,"INSERT OR REPLACE INTO "+m.storeName+" (key, value) VALUES (?, ?)",[e,w],function(){u(h)},function(k,H){d(H)})},function($){if($.code===$.QUOTA_ERR){if(o>0)return void u(Ue.apply(i,[e,h,t,o-1]));d($)}})})}).catch(d)});return b(r,t),r}var Ot={_driver:"webSQLStorage",_initStorage:function It(e){var n=this,t={db:null};if(e)for(var o in e)t[o]="string"!=typeof e[o]?e[o].toString():e[o];var i=new l(function(r,u){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(d){return u(d)}t.db.transaction(function(d){ze(d,t,function(){n._dbInfo=t,r()},function(h,m){u(m)})},u)});return t.serializer=be,i},_support:function _t(){return"function"==typeof openDatabase}(),iterate:function At(e,n){var t=this,o=new l(function(i,r){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(d){ee(d,u,"SELECT * FROM "+u.storeName,[],function(h,m){for(var w=m.rows,x=w.length,$=0;$<x;$++){var k=w.item($),H=k.value;if(H&&(H=u.serializer.deserialize(H)),void 0!==(H=e(H,k.key,$+1)))return void i(H)}i()},function(h,m){r(m)})})}).catch(r)});return b(o,n),o},getItem:function Ct(e,n){var t=this;e=D(e);var o=new l(function(i,r){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(d){ee(d,u,"SELECT * FROM "+u.storeName+" WHERE key = ? LIMIT 1",[e],function(h,m){var w=m.rows.length?m.rows.item(0).value:null;w&&(w=u.serializer.deserialize(w)),i(w)},function(h,m){r(m)})})}).catch(r)});return b(o,n),o},setItem:function Rt(e,n,t){return Ue.apply(this,[e,n,t,1])},removeItem:function Dt(e,n){var t=this;e=D(e);var o=new l(function(i,r){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(d){ee(d,u,"DELETE FROM "+u.storeName+" WHERE key = ?",[e],function(){i()},function(h,m){r(m)})})}).catch(r)});return b(o,n),o},clear:function Tt(e){var n=this,t=new l(function(o,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(u){ee(u,r,"DELETE FROM "+r.storeName,[],function(){o()},function(d,h){i(h)})})}).catch(i)});return b(t,e),t},length:function Bt(e){var n=this,t=new l(function(o,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(u){ee(u,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(d,h){var m=h.rows.item(0).c;o(m)},function(d,h){i(h)})})}).catch(i)});return b(t,e),t},key:function Lt(e,n){var t=this,o=new l(function(i,r){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(d){ee(d,u,"SELECT key FROM "+u.storeName+" WHERE id = ? LIMIT 1",[e+1],function(h,m){var w=m.rows.length?m.rows.item(0).key:null;i(w)},function(h,m){r(m)})})}).catch(r)});return b(o,n),o},keys:function Nt(e){var n=this,t=new l(function(o,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(u){ee(u,r,"SELECT key FROM "+r.storeName,[],function(d,h){for(var m=[],w=0;w<h.rows.length;w++)m.push(h.rows.item(w).key);o(m)},function(d,h){i(h)})})}).catch(i)});return b(t,e),t},dropInstance:function $t(e,n){n=R.apply(this,arguments);var t=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var i,o=this;return b(i=e.name?new l(function(r){var u;u=e.name===t.name?o._dbInfo.db:openDatabase(e.name,"","",0),r(e.storeName?{db:u,storeNames:[e.storeName]}:function Pt(e){return new l(function(n,t){e.transaction(function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(i,r){for(var u=[],d=0;d<r.rows.length;d++)u.push(r.rows.item(d).name);n({db:e,storeNames:u})},function(i,r){t(r)})},function(o){t(o)})})}(u))}).then(function(r){return new l(function(u,d){r.db.transaction(function(h){function m(k){return new l(function(H,K){h.executeSql("DROP TABLE IF EXISTS "+k,[],function(){H()},function(V,J){K(J)})})}for(var w=[],x=0,$=r.storeNames.length;x<$;x++)w.push(m(r.storeNames[x]));l.all(w).then(function(){u()}).catch(function(k){d(k)})},function(h){d(h)})})}):l.reject("Invalid arguments"),n),i}};function Ye(e,n){var t=e.name+"/";return e.storeName!==n.storeName&&(t+=e.storeName+"/"),t}var qt={_driver:"localStorageWrapper",_initStorage:function Wt(e){var t={};if(e)for(var o in e)t[o]=e[o];return t.keyPrefix=Ye(e,this._defaultConfig),function Ht(){return!function kt(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}()||localStorage.length>0}()?(this._dbInfo=t,t.serializer=be,l.resolve()):l.reject()},_support:function Mt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function Ut(e,n){var t=this,o=t.ready().then(function(){for(var i=t._dbInfo,r=i.keyPrefix,u=r.length,d=localStorage.length,h=1,m=0;m<d;m++){var w=localStorage.key(m);if(0===w.indexOf(r)){var x=localStorage.getItem(w);if(x&&(x=i.serializer.deserialize(x)),void 0!==(x=e(x,w.substring(u),h++)))return x}}});return b(o,n),o},getItem:function zt(e,n){var t=this;e=D(e);var o=t.ready().then(function(){var i=t._dbInfo,r=localStorage.getItem(i.keyPrefix+e);return r&&(r=i.serializer.deserialize(r)),r});return b(o,n),o},setItem:function Xt(e,n,t){var o=this;e=D(e);var i=o.ready().then(function(){void 0===n&&(n=null);var r=n;return new l(function(u,d){var h=o._dbInfo;h.serializer.serialize(n,function(m,w){if(w)d(w);else try{localStorage.setItem(h.keyPrefix+e,m),u(r)}catch(x){("QuotaExceededError"===x.name||"NS_ERROR_DOM_QUOTA_REACHED"===x.name)&&d(x),d(x)}})})});return b(i,t),i},removeItem:function Qt(e,n){var t=this;e=D(e);var o=t.ready().then(function(){localStorage.removeItem(t._dbInfo.keyPrefix+e)});return b(o,n),o},clear:function Ft(e){var n=this,t=n.ready().then(function(){for(var o=n._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var r=localStorage.key(i);0===r.indexOf(o)&&localStorage.removeItem(r)}});return b(t,e),t},length:function Kt(e){var t=this.keys().then(function(o){return o.length});return b(t,e),t},key:function Yt(e,n){var t=this,o=t.ready().then(function(){var r,i=t._dbInfo;try{r=localStorage.key(e)}catch{r=null}return r&&(r=r.substring(i.keyPrefix.length)),r});return b(o,n),o},keys:function Vt(e){var n=this,t=n.ready().then(function(){for(var o=n._dbInfo,i=localStorage.length,r=[],u=0;u<i;u++){var d=localStorage.key(u);0===d.indexOf(o.keyPrefix)&&r.push(d.substring(o.keyPrefix.length))}return r});return b(t,e),t},dropInstance:function Gt(e,n){if(n=R.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var i,o=this;return b(i=e.name?new l(function(r){r(e.storeName?Ye(e,o._defaultConfig):e.name+"/")}).then(function(r){for(var u=localStorage.length-1;u>=0;u--){var d=localStorage.key(u);0===d.indexOf(r)&&localStorage.removeItem(d)}}):l.reject("Invalid arguments"),n),i}},Jt=function(n,t){return n===t||"number"==typeof n&&"number"==typeof t&&isNaN(n)&&isNaN(t)},Zt=function(n,t){for(var o=n.length,i=0;i<o;){if(Jt(n[i],t))return!0;i++}return!1},Ve=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ae={},Ke={},ie={INDEXEDDB:bt,WEBSQL:Ot,LOCALSTORAGE:qt},jt=[ie.INDEXEDDB._driver,ie.WEBSQL._driver,ie.LOCALSTORAGE._driver],le=["dropInstance"],_e=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(le),en={description:"",driver:jt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function tn(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function Ee(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var t in n)n.hasOwnProperty(t)&&(arguments[0][t]=Ve(n[t])?n[t].slice():n[t])}return arguments[0]}var nn=function(){function e(n){for(var t in function B(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),ie)if(ie.hasOwnProperty(t)){var o=ie[t],i=o._driver;this[t]=i,ae[i]||this.defineDriver(o)}this._defaultConfig=Ee({},en),this._config=Ee({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if("object"===(typeof t>"u"?"undefined":S(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in t){if("storeName"===o&&(t[o]=t[o].replace(/\W/g,"_")),"version"===o&&"number"!=typeof t[o])return new Error("Database version must be a number.");this._config[o]=t[o]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},e.prototype.defineDriver=function(t,o,i){var r=new l(function(u,d){try{var h=t._driver,m=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void d(m);for(var w=_e.concat("_initStorage"),x=0,$=w.length;x<$;x++){var k=w[x];if((!Zt(le,k)||t[k])&&"function"!=typeof t[k])return void d(m)}!function(){for(var se=function(an){return function(){var sn=new Error("Method "+an+" is not implemented by the current driver"),Qe=l.reject(sn);return b(Qe,arguments[arguments.length-1]),Qe}},xe=0,on=le.length;xe<on;xe++){var Se=le[xe];t[Se]||(t[Se]=se(Se))}}();var V=function(se){ae[h]&&console.info("Redefining LocalForage driver: "+h),ae[h]=t,Ke[h]=se,u()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(V,d):V(!!t._support):V(!0)}catch(J){d(J)}});return T(r,o,i),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,o,i){var r=ae[t]?l.resolve(ae[t]):l.reject(new Error("Driver not found."));return T(r,o,i),r},e.prototype.getSerializer=function(t){var o=l.resolve(be);return T(o,t),o},e.prototype.ready=function(t){var o=this,i=o._driverSet.then(function(){return null===o._ready&&(o._ready=o._initDriver()),o._ready});return T(i,t,t),i},e.prototype.setDriver=function(t,o,i){var r=this;Ve(t)||(t=[t]);var u=this._getSupportedDrivers(t);function d(){r._config.driver=r.driver()}function h(x){return r._extend(x),d(),r._ready=r._initStorage(r._config),r._ready}var w=null!==this._driverSet?this._driverSet.catch(function(){return l.resolve()}):l.resolve();return this._driverSet=w.then(function(){var x=u[0];return r._dbInfo=null,r._ready=null,r.getDriver(x).then(function($){r._driver=$._driver,d(),r._wrapLibraryMethodsWithReady(),r._initDriver=function m(x){return function(){var $=0;return function k(){for(;$<x.length;){var H=x[$];return $++,r._dbInfo=null,r._ready=null,r.getDriver(H).then(h).catch(k)}d();var K=new Error("No available storage method found.");return r._driverSet=l.reject(K),r._driverSet}()}}(u)})}).catch(function(){d();var x=new Error("No available storage method found.");return r._driverSet=l.reject(x),r._driverSet}),T(this._driverSet,o,i),this._driverSet},e.prototype.supports=function(t){return!!Ke[t]},e.prototype._extend=function(t){Ee(this,t)},e.prototype._getSupportedDrivers=function(t){for(var o=[],i=0,r=t.length;i<r;i++){var u=t[i];this.supports(u)&&o.push(u)}return o},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,o=_e.length;t<o;t++)tn(this,_e[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),rn=new nn;c.exports=rn},{3:3}]},{},[4])(4)});let Ie={};function Ce(a={}){Ie={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...a}}function E(a){return a?Ie[a]:Ie}function fe(a,s,f,v){return(a/=v/2)<1?f/2*a*a+s:-f/2*(--a*(a-2)-1)+s}function Xe(a){const s='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return a.flatMap(f=>{const v=f.matches(s),c=Array.from(f.querySelectorAll(s));return[...v?[f]:[],...c]}).filter(f=>"none"!==getComputedStyle(f).pointerEvents&&ln(f))}function Ge(a){if(!a||cn(a))return;const s=E("smoothScroll");a.scrollIntoView({behavior:!s||un(a)?"auto":"smooth",inline:"center",block:"center"})}function un(a){if(!a||!a.parentElement)return;const s=a.parentElement;return s.scrollHeight>s.clientHeight}function cn(a){const s=a.getBoundingClientRect();return s.top>=0&&s.left>=0&&s.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&s.right<=(window.innerWidth||document.documentElement.clientWidth)}function ln(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}let de={};function Q(a,s){de[a]=s}function I(a){return a?de[a]:de}function qe(){de={}}let ve={};function pe(a,s){ve[a]=s}function ne(a){var s;null==(s=ve[a])||s.call(ve)}function fn(){ve={}}function dn(a,s,f,v){let c=I("__activeStagePosition");const _=c||f.getBoundingClientRect(),S=v.getBoundingClientRect();c={x:fe(a,_.x,S.x-_.x,s),y:fe(a,_.y,S.y-_.y,s),width:fe(a,_.width,S.width-_.width,s),height:fe(a,_.height,S.height-_.height,s)},Ze(c),Q("__activeStagePosition",c)}function Je(a){if(!a)return;const s=a.getBoundingClientRect(),f={x:s.x,y:s.y,width:s.width,height:s.height};Q("__activeStagePosition",f),Ze(f)}function vn(){const a=I("__activeStagePosition"),s=I("__overlaySvg");if(!a)return;if(!s)return void console.warn("No stage svg found.");const f=window.innerWidth,v=window.innerHeight;s.setAttribute("viewBox",`0 0 ${f} ${v}`)}function pn(a){const s=hn(a);document.body.appendChild(s),nt(s,f=>{"path"===f.target.tagName&&ne("overlayClick")}),Q("__overlaySvg",s)}function Ze(a){const s=I("__overlaySvg");if(!s)return void pn(a);const f=s.firstElementChild;if("path"!==f?.tagName)throw new Error("no path element found in stage svg");f.setAttribute("d",je(a))}function hn(a){const s=window.innerWidth,f=window.innerHeight,v=document.createElementNS("http://www.w3.org/2000/svg","svg");v.classList.add("driver-overlay","driver-overlay-animated"),v.setAttribute("viewBox",`0 0 ${s} ${f}`),v.setAttribute("xmlSpace","preserve"),v.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),v.setAttribute("version","1.1"),v.setAttribute("preserveAspectRatio","xMinYMin slice"),v.style.fillRule="evenodd",v.style.clipRule="evenodd",v.style.strokeLinejoin="round",v.style.strokeMiterlimit="2",v.style.zIndex="10000",v.style.position="fixed",v.style.top="0",v.style.left="0",v.style.width="100%",v.style.height="100%";const c=document.createElementNS("http://www.w3.org/2000/svg","path");return c.setAttribute("d",je(a)),c.style.fill=E("overlayColor")||"rgb(0,0,0)",c.style.opacity=`${E("overlayOpacity")}`,c.style.pointerEvents="auto",c.style.cursor="auto",v.appendChild(c),v}function je(a){const s=window.innerWidth,f=window.innerHeight,v=E("stagePadding")||0,c=E("stageRadius")||0,_=a.width+2*v,S=a.height+2*v,B=Math.min(c,_/2,S/2),p=Math.floor(Math.max(B,0)),C=_-2*p,l=S-2*p;return`M${s},0L0,0L0,${f}L${s},${f}L${s},0Z\n    M${a.x-v+p},${a.y-v} h${C} a${p},${p} 0 0 1 ${p},${p} v${l} a${p},${p} 0 0 1 -${p},${p} h-${C} a${p},${p} 0 0 1 -${p},-${p} v-${l} a${p},${p} 0 0 1 ${p},-${p} z`}function mn(){const a=I("__overlaySvg");a&&a.remove()}function gn(){const a=document.getElementById("driver-dummy-element");if(a)return a;let s=document.createElement("div");return s.id="driver-dummy-element",s.style.width="0",s.style.height="0",s.style.pointerEvents="none",s.style.opacity="0",s.style.position="fixed",s.style.top="50%",s.style.left="50%",document.body.appendChild(s),s}function et(a){const{element:s}=a;let f="string"==typeof s?document.querySelector(s):s;f||(f=gn()),wn(f,a)}function yn(){const a=I("__activeElement"),s=I("__activeStep");a&&(Je(a),vn(),st(a,s))}function wn(a,s){const f=Date.now(),v=I("__activeStep"),c=I("__activeElement")||a,_=!c||c===a,S="driver-dummy-element"===a.id,B="driver-dummy-element"===c.id,p=E("animate"),A=s.onHighlightStarted||E("onHighlightStarted"),y=s?.onHighlighted||E("onHighlighted"),C=v?.onDeselected||E("onDeselected"),l=E(),b=I();!_&&C&&C(B?void 0:c,v,{config:l,state:b}),A&&A(S?void 0:a,s,{config:l,state:b});const T=!_&&p;let D=!1;Sn(),Q("previousStep",v),Q("previousElement",c),Q("activeStep",s),Q("activeElement",a);const R=()=>{if(I("__transitionCallback")!==R)return;const L=Date.now()-f;s.popover&&400-L<=200&&!D&&T&&(rt(a,s),D=!0),E("animate")&&L<400?dn(L,400,c,a):(Je(a),y&&y(S?void 0:a,s,{config:E(),state:I()}),Q("__transitionCallback",void 0),Q("__previousStep",v),Q("__previousElement",c),Q("__activeStep",s),Q("__activeElement",a)),window.requestAnimationFrame(R)};Q("__transitionCallback",R),window.requestAnimationFrame(R),Ge(a),!T&&s.popover&&rt(a,s),c.classList.remove("driver-active-element","driver-no-interaction"),c.removeAttribute("aria-haspopup"),c.removeAttribute("aria-expanded"),c.removeAttribute("aria-controls"),E("disableActiveInteraction")&&a.classList.add("driver-no-interaction"),a.classList.add("driver-active-element"),a.setAttribute("aria-haspopup","dialog"),a.setAttribute("aria-expanded","true"),a.setAttribute("aria-controls","driver-popover-content")}function bn(){var a;null==(a=document.getElementById("driver-dummy-element"))||a.remove(),document.querySelectorAll(".driver-active-element").forEach(s=>{s.classList.remove("driver-active-element","driver-no-interaction"),s.removeAttribute("aria-haspopup"),s.removeAttribute("aria-expanded"),s.removeAttribute("aria-controls")})}function ue(){const a=I("__resizeTimeout");a&&window.cancelAnimationFrame(a),Q("__resizeTimeout",window.requestAnimationFrame(yn))}function _n(a){var s;if(!I("isInitialized")||"Tab"!==a.key&&9!==a.keyCode)return;const f=I("__activeElement"),v=null==(s=I("popover"))?void 0:s.wrapper,c=Xe([...v?[v]:[],...f?[f]:[]]),_=c[0],S=c[c.length-1];if(a.preventDefault(),a.shiftKey){const B=c[c.indexOf(document.activeElement)-1]||S;B?.focus()}else{const B=c[c.indexOf(document.activeElement)+1]||_;B?.focus()}}function tt(a){var s;(null==(s=E("allowKeyboardControl"))||s)&&("Escape"===a.key?ne("escapePress"):"ArrowRight"===a.key?ne("arrowRightPress"):"ArrowLeft"===a.key&&ne("arrowLeftPress"))}function nt(a,s,f){const v=(c,_)=>{const S=c.target;a.contains(S)&&((!f||f(S))&&(c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation()),_?.(c))};document.addEventListener("pointerdown",v,!0),document.addEventListener("mousedown",v,!0),document.addEventListener("pointerup",v,!0),document.addEventListener("mouseup",v,!0),document.addEventListener("click",c=>{v(c,s)},!0)}function En(){window.addEventListener("keyup",tt,!1),window.addEventListener("keydown",_n,!1),window.addEventListener("resize",ue),window.addEventListener("scroll",ue)}function xn(){window.removeEventListener("keyup",tt),window.removeEventListener("resize",ue),window.removeEventListener("scroll",ue)}function Sn(){const a=I("popover");a&&(a.wrapper.style.display="none")}function rt(a,s){var f,v;let c=I("popover");c&&document.body.removeChild(c.wrapper),c=Cn(),document.body.appendChild(c.wrapper);const{title:_,description:S,showButtons:B,disableButtons:p,showProgress:A,nextBtnText:y=E("nextBtnText")||"Next &rarr;",prevBtnText:C=E("prevBtnText")||"&larr; Previous",progressText:l=E("progressText")||"{current} of {total}"}=s.popover||{};c.nextButton.innerHTML=y,c.previousButton.innerHTML=C,c.progress.innerHTML=l,_?(c.title.innerHTML=_,c.title.style.display="block"):c.title.style.display="none",S?(c.description.innerHTML=S,c.description.style.display="block"):c.description.style.display="none";const b=B||E("showButtons"),T=A||E("showProgress")||!1,D=b?.includes("next")||b?.includes("previous")||T;c.closeButton.style.display=b.includes("close")?"block":"none",D?(c.footer.style.display="flex",c.progress.style.display=T?"block":"none",c.nextButton.style.display=b.includes("next")?"block":"none",c.previousButton.style.display=b.includes("previous")?"block":"none"):c.footer.style.display="none";const R=p||E("disableButtons")||[];null!=R&&R.includes("next")&&(c.nextButton.disabled=!0,c.nextButton.classList.add("driver-popover-btn-disabled")),null!=R&&R.includes("previous")&&(c.previousButton.disabled=!0,c.previousButton.classList.add("driver-popover-btn-disabled")),null!=R&&R.includes("close")&&(c.closeButton.disabled=!0,c.closeButton.classList.add("driver-popover-btn-disabled"));const L=c.wrapper;L.style.display="block",L.style.left="",L.style.top="",L.style.bottom="",L.style.right="",L.id="driver-popover-content",L.setAttribute("role","dialog"),L.setAttribute("aria-labelledby","driver-popover-title"),L.setAttribute("aria-describedby","driver-popover-description"),c.arrow.className="driver-popover-arrow";const M=(null==(f=s.popover)?void 0:f.popoverClass)||E("popoverClass")||"";L.className=`driver-popover ${M}`.trim(),nt(c.wrapper,P=>{var N,O,U;const Y=P.target,X=(null==(N=s.popover)?void 0:N.onNextClick)||E("onNextClick"),G=(null==(O=s.popover)?void 0:O.onPrevClick)||E("onPrevClick"),q=(null==(U=s.popover)?void 0:U.onCloseClick)||E("onCloseClick");return Y.classList.contains("driver-popover-next-btn")?X?X(a,s,{config:E(),state:I()}):ne("nextClick"):Y.classList.contains("driver-popover-prev-btn")?G?G(a,s,{config:E(),state:I()}):ne("prevClick"):Y.classList.contains("driver-popover-close-btn")?q?q(a,s,{config:E(),state:I()}):ne("closeClick"):void 0},P=>!(null!=c&&c.description.contains(P))&&!(null!=c&&c.title.contains(P))&&"string"==typeof P.className&&P.className.includes("driver-popover")),Q("popover",c);const W=(null==(v=s.popover)?void 0:v.onPopoverRender)||E("onPopoverRender");W&&W(c,{config:E(),state:I()}),st(a,s),Ge(L);const g=Xe([L,...a.classList.contains("driver-dummy-element")?[]:[a]]);g.length>0&&g[0].focus()}function ot(){const a=I("popover");if(null==a||!a.wrapper)return;const s=a.wrapper.getBoundingClientRect(),f=E("stagePadding")||0,v=E("popoverOffset")||0;return{width:s.width+f+v,height:s.height+f+v,realWidth:s.width,realHeight:s.height}}function it(a,s){const{elementDimensions:f,popoverDimensions:v,popoverPadding:c,popoverArrowDimensions:_}=s;return"start"===a?Math.max(Math.min(f.top-c,window.innerHeight-v.realHeight-_.width),_.width):"end"===a?Math.max(Math.min(f.top-v?.realHeight+f.height+c,window.innerHeight-v?.realHeight-_.width),_.width):"center"===a?Math.max(Math.min(f.top+f.height/2-v?.realHeight/2,window.innerHeight-v?.realHeight-_.width),_.width):0}function at(a,s){const{elementDimensions:f,popoverDimensions:v,popoverPadding:c,popoverArrowDimensions:_}=s;return"start"===a?Math.max(Math.min(f.left-c,window.innerWidth-v.realWidth-_.width),_.width):"end"===a?Math.max(Math.min(f.left-v?.realWidth+f.width+c,window.innerWidth-v?.realWidth-_.width),_.width):"center"===a?Math.max(Math.min(f.left+f.width/2-v?.realWidth/2,window.innerWidth-v?.realWidth-_.width),_.width):0}function st(a,s){const f=I("popover");if(!f)return;const{align:v="start",side:c="left"}=s?.popover||{},_=v,S="driver-dummy-element"===a.id?"over":c,B=E("stagePadding")||0,p=ot(),A=f.arrow.getBoundingClientRect(),y=a.getBoundingClientRect(),C=y.top-p.height;let l=C>=0;const b=window.innerHeight-(y.bottom+p.height);let T=b>=0;const D=y.left-p.width;let R=D>=0;const L=window.innerWidth-(y.right+p.width);let z=L>=0;const M=!(l||T||R||z);let W=S;if("top"===S&&l?z=R=T=!1:"bottom"===S&&T?z=R=l=!1:"left"===S&&R?z=l=T=!1:"right"===S&&z&&(R=l=T=!1),"over"===S){const F=window.innerWidth/2-p.realWidth/2,g=window.innerHeight/2-p.realHeight/2;f.wrapper.style.left=`${F}px`,f.wrapper.style.right="auto",f.wrapper.style.top=`${g}px`,f.wrapper.style.bottom="auto"}else if(M){const F=window.innerWidth/2-p?.realWidth/2,g=10;f.wrapper.style.left=`${F}px`,f.wrapper.style.right="auto",f.wrapper.style.bottom=`${g}px`,f.wrapper.style.top="auto"}else if(R){const F=Math.min(D,window.innerWidth-p?.realWidth-A.width),g=it(_,{elementDimensions:y,popoverDimensions:p,popoverPadding:B,popoverArrowDimensions:A});f.wrapper.style.left=`${F}px`,f.wrapper.style.top=`${g}px`,f.wrapper.style.bottom="auto",f.wrapper.style.right="auto",W="left"}else if(z){const F=Math.min(L,window.innerWidth-p?.realWidth-A.width),g=it(_,{elementDimensions:y,popoverDimensions:p,popoverPadding:B,popoverArrowDimensions:A});f.wrapper.style.right=`${F}px`,f.wrapper.style.top=`${g}px`,f.wrapper.style.bottom="auto",f.wrapper.style.left="auto",W="right"}else if(l){const F=Math.min(C,window.innerHeight-p.realHeight-A.width);let g=at(_,{elementDimensions:y,popoverDimensions:p,popoverPadding:B,popoverArrowDimensions:A});f.wrapper.style.top=`${F}px`,f.wrapper.style.left=`${g}px`,f.wrapper.style.bottom="auto",f.wrapper.style.right="auto",W="top"}else if(T){const F=Math.min(b,window.innerHeight-p?.realHeight-A.width);let g=at(_,{elementDimensions:y,popoverDimensions:p,popoverPadding:B,popoverArrowDimensions:A});f.wrapper.style.left=`${g}px`,f.wrapper.style.bottom=`${F}px`,f.wrapper.style.top="auto",f.wrapper.style.right="auto",W="bottom"}M?f.arrow.classList.add("driver-popover-arrow-none"):In(_,W,a)}function In(a,s,f){const v=I("popover");if(!v)return;const c=f.getBoundingClientRect(),_=ot(),S=v.arrow,B=_.width,p=window.innerWidth,A=c.width,y=c.left,C=_.height,l=window.innerHeight,b=c.top,T=c.height;S.className="driver-popover-arrow";let D=s,R=a;"top"===s?(y+A<=0?(D="right",R="end"):y+A-B<=0&&(D="top",R="start"),y>=p?(D="left",R="end"):y+B>=p&&(D="top",R="end")):"bottom"===s?(y+A<=0?(D="right",R="start"):y+A-B<=0&&(D="bottom",R="start"),y>=p?(D="left",R="start"):y+B>=p&&(D="bottom",R="end")):"left"===s?(b+T<=0?(D="bottom",R="end"):b+T-C<=0&&(D="left",R="start"),b>=l?(D="top",R="end"):b+C>=l&&(D="left",R="end")):"right"===s&&(b+T<=0?(D="bottom",R="start"):b+T-C<=0&&(D="right",R="start"),b>=l?(D="top",R="start"):b+C>=l&&(D="right",R="end")),D?(S.classList.add(`driver-popover-arrow-side-${D}`),S.classList.add(`driver-popover-arrow-align-${R}`)):S.classList.add("driver-popover-arrow-none")}function Cn(){const a=document.createElement("div");a.classList.add("driver-popover");const s=document.createElement("div");s.classList.add("driver-popover-arrow");const f=document.createElement("header");f.id="driver-popover-title",f.classList.add("driver-popover-title"),f.style.display="none",f.innerText="Popover Title";const v=document.createElement("div");v.id="driver-popover-description",v.classList.add("driver-popover-description"),v.style.display="none",v.innerText="Popover description is here";const c=document.createElement("button");c.type="button",c.classList.add("driver-popover-close-btn"),c.setAttribute("aria-label","Close"),c.innerHTML="&times;";const _=document.createElement("footer");_.classList.add("driver-popover-footer");const S=document.createElement("span");S.classList.add("driver-popover-progress-text"),S.innerText="";const B=document.createElement("span");B.classList.add("driver-popover-navigation-btns");const p=document.createElement("button");p.type="button",p.classList.add("driver-popover-prev-btn"),p.innerHTML="&larr; Previous";const A=document.createElement("button");return A.type="button",A.classList.add("driver-popover-next-btn"),A.innerHTML="Next &rarr;",B.appendChild(p),B.appendChild(A),_.appendChild(S),_.appendChild(B),a.appendChild(c),a.appendChild(s),a.appendChild(f),a.appendChild(v),a.appendChild(_),{wrapper:a,arrow:s,title:f,description:v,footer:_,previousButton:p,nextButton:A,closeButton:c,footerButtons:B,progress:S}}function An(){var a;const s=I("popover");s&&(null==(a=s.wrapper.parentElement)||a.removeChild(s.wrapper))}function Rn(a={}){function s(){E("allowClose")&&A()}function f(){const y=I("activeIndex"),C=E("steps")||[];if(typeof y>"u")return;const l=y+1;C[l]?p(l):A()}function v(){const y=I("activeIndex"),C=E("steps")||[];if(typeof y>"u")return;const l=y-1;C[l]?p(l):A()}function _(){var y;if(I("__transitionCallback"))return;const C=I("activeIndex"),l=I("__activeStep"),b=I("__activeElement");if(typeof C>"u"||typeof l>"u"||typeof I("activeIndex")>"u")return;const T=(null==(y=l.popover)?void 0:y.onPrevClick)||E("onPrevClick");if(T)return T(b,l,{config:E(),state:I()});v()}function S(){var y;if(I("__transitionCallback"))return;const C=I("activeIndex"),l=I("__activeStep"),b=I("__activeElement");if(typeof C>"u"||typeof l>"u")return;const T=(null==(y=l.popover)?void 0:y.onNextClick)||E("onNextClick");if(T)return T(b,l,{config:E(),state:I()});f()}function B(){I("isInitialized")||(Q("isInitialized",!0),document.body.classList.add("driver-active",E("animate")?"driver-fade":"driver-simple"),En(),pe("overlayClick",s),pe("escapePress",s),pe("arrowLeftPress",_),pe("arrowRightPress",S))}function p(y=0){var C,l,b,T,D,R,L,z;const M=E("steps");if(!M)return console.error("No steps to drive through"),void A();if(!M[y])return void A();Q("__activeOnDestroyed",document.activeElement),Q("activeIndex",y);const W=M[y],F=M[y+1],g=M[y-1],P=(null==(C=W.popover)?void 0:C.doneBtnText)||E("doneBtnText")||"Done",N=E("allowClose"),O=typeof(null==(l=W.popover)?void 0:l.showProgress)<"u"?null==(b=W.popover)?void 0:b.showProgress:E("showProgress"),U=((null==(T=W.popover)?void 0:T.progressText)||E("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${y+1}`).replace("{{total}}",`${M.length}`),Y=(null==(D=W.popover)?void 0:D.showButtons)||E("showButtons"),X=["next","previous",...N?["close"]:[]].filter(re=>!(null!=Y&&Y.length)||Y.includes(re)),G=(null==(R=W.popover)?void 0:R.onNextClick)||E("onNextClick"),q=(null==(L=W.popover)?void 0:L.onPrevClick)||E("onPrevClick"),te=(null==(z=W.popover)?void 0:z.onCloseClick)||E("onCloseClick");et({...W,popover:{showButtons:X,nextBtnText:F?void 0:P,disableButtons:[...g?[]:["previous"]],showProgress:O,progressText:U,onNextClick:G||(()=>{F?p(y+1):A()}),onPrevClick:q||(()=>{p(y-1)}),onCloseClick:te||(()=>{A()}),...W?.popover||{}}})}function A(y=!0){const C=I("__activeElement"),l=I("__activeStep"),b=I("__activeOnDestroyed"),T=E("onDestroyStarted");if(y&&T)return void T(C&&"driver-dummy-element"!==C?.id?C:void 0,l,{config:E(),state:I()});const D=l?.onDeselected||E("onDeselected"),R=E("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),xn(),An(),bn(),mn(),fn(),qe(),C&&l){const L="driver-dummy-element"===C.id;D&&D(L?void 0:C,l,{config:E(),state:I()}),R&&R(L?void 0:C,l,{config:E(),state:I()})}b&&b.focus()}return Ce(a),{isActive:()=>I("isInitialized")||!1,refresh:ue,drive:(y=0)=>{B(),p(y)},setConfig:Ce,setSteps:y=>{qe(),Ce({...E(),steps:y})},getConfig:E,getState:I,getActiveIndex:()=>I("activeIndex"),isFirstStep:()=>0===I("activeIndex"),isLastStep:()=>{const y=E("steps")||[],C=I("activeIndex");return void 0!==C&&C===y.length-1},getActiveStep:()=>I("activeStep"),getActiveElement:()=>I("activeElement"),getPreviousElement:()=>I("previousElement"),getPreviousStep:()=>I("previousStep"),moveNext:f,movePrevious:v,moveTo:function c(y){(E("steps")||[])[y]?p(y):A()},hasNextStep:()=>{const y=E("steps")||[],C=I("activeIndex");return void 0!==C&&y[C+1]},hasPreviousStep:()=>{const y=E("steps")||[],C=I("activeIndex");return void 0!==C&&y[C-1]},highlight:y=>{B(),et({...y,popover:y.popover?{showButtons:[],showProgress:!1,progressText:"",...y.popover}:void 0})},destroy:()=>{A(!1)}}}export{Rn as driver};